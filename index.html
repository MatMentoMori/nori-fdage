<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday List</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            /* --- Color Palette --- */
            --color-bg: #DCE7F4; /* Very Light Blue - Page Background */
            --color-card-default: #baceec; /* Light Blue - Default Card Background */
            --color-text-default: #5789CD; /* Medium Gray - Default Text */
            --color-text-subtitle: #5789CD; /* Lighter Gray for subtitle */
            --color-heading: #2a60ac; /* Dark Gray for heading */
            --color-subheading: rgb(140, 147, 157); /* Medium Gray for subheading */
            --color-image-tint: #EFF6FF; /* Blue for image tint */
            --color-text-center: #2a60ac; /* Dark Gray - Centered Card Text */
            --color-card-center: #c5d4ea;  /* White - Centered Card Background */

            /* --- Particle Colors --- */
            --color-particle-1: #ffffff;
            --color-particle-2: #757f8c;
            --color-particle-3: #2a60ac;

            /* --- Sizing & Spacing --- */
            --card-max-width: 620px;     /* Max width of the cards */
            --card-vertical-margin: 16px; /* Space between cards */
            --card-padding: clamp(.8rem, 2vw, 1.2rem);      /* Inner padding of the cards */
            --image-size: clamp(70px, 10vw, 85px);           /* Diameter of the profile image */
            --text-margin-left: clamp(.8rem, 2vw, 1.2rem);  /* Space between image and text */

            /* --- Font Sizes --- */
            --font-size-name: clamp(1.25rem, 3vw, 1.6rem); /* Responsive name font size */
            --font-size-subtitle: clamp(1rem, 2vw, 1.3rem);
            --font-size-heading: clamp(2.5rem, 6vw, 4rem);
            --font-size-subheading: clamp(1.1rem, 2vw, 2rem);
        }

        /* Custom font */
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; 
            background-color: var(--color-bg);
        }

        /* Particle Canvas Style */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* The main scrollable container for the list */
        #scroll-container {
            height: 100vh;
            width: 100vw;
            overflow-y: scroll;
            scroll-snap-type: y mandatory; 
            padding: 45vh 0;
            box-sizing: border-box;
        }
        
        /* Heading container */
        .heading-container {
            text-align: center;
            margin-bottom: 40px;
            scroll-snap-align: center;
            transition: transform 0.1s ease-out, opacity 0.1s ease-out;
        }

        .sub-heading {
            font-size: var(--font-size-subheading);
            color: var(--color-subheading);
            font-weight: 400;
        }

        .main-heading {
            font-size: var(--font-size-heading);
            color: var(--color-heading);
            font-weight: 700;
            line-height: 1.2;
        }

        /* A container for each event row. */
        .event-row {
            display: flex; 
            align-items: center;
            background-color: var(--color-card-default);
            border-radius: 9999px; /* Pill shape */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.0001);
            margin: var(--card-vertical-margin) auto;
            width: 90%;
            max-width: var(--card-max-width);
            padding: var(--card-padding);
            scroll-snap-align: center;
            transition: transform 0.1s ease-out, opacity 0.1s ease-out;
            cursor: pointer;
        }

        /* Circular image placeholder */
        .image-container {
            width: var(--image-size);
            height: var(--image-size);
            border-radius: 50%;
            flex-shrink: 0;
            position: relative;
            overflow: hidden; 
        }
        
        .image-placeholder {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }

        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-image-tint);
            mix-blend-mode: multiply; 
            opacity: 0; 
            transition: opacity 0.1s ease-out;
        }

        /* Details section for name and days */
        .details-section {
            text-align: left;
            margin-left: var(--text-margin-left);
        }

        /* Text styles */
        .name { 
            font-size: var(--font-size-name); 
            font-weight: 700; 
            line-height: 1.2;
        }
        .days-subtitle { 
            font-size: var(--font-size-subtitle); 
        }

    </style>
</head>
<body>
    <canvas id="particle-canvas"></canvas>
    <div id="scroll-container">
        <div class="heading-container">
            <div class="sub-heading">Nedtælling til</div>
            <h1 class="main-heading">Fødselsdage:</h1>
        </div>
        <div id="event-list-wrapper">
             <!-- Event rows will be dynamically inserted here by JavaScript -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- PARTICLE SYSTEM ---
            const canvas = document.getElementById('particle-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function createParticles() {
                particles = [];
                const particleCount = 50;
                
                // Read particle colors from CSS variables
                const styles = getComputedStyle(document.documentElement);
                const colors = [
                    styles.getPropertyValue('--color-particle-1').trim(),
                    styles.getPropertyValue('--color-particle-2').trim(),
                    styles.getPropertyValue('--color-particle-3').trim()
                ];

                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 3 + 1,
                        dx: (Math.random() - 0.5) * 0.2,
                        dy: (Math.random() - 0.5) * 0.2,
                        color: colors[Math.floor(Math.random() * colors.length)]
                    });
                }
            }

            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let particle of particles) {
                    particle.x += particle.dx;
                    particle.y += particle.dy;
                    if (particle.x < 0 || particle.x > canvas.width) particle.dx *= -1;
                    if (particle.y < 0 || particle.y > canvas.height) particle.dy *= -1;
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                    ctx.fillStyle = particle.color;
                    ctx.fill();
                }
                requestAnimationFrame(animateParticles);
            }

            // --- BIRTHDAY LIST ---
            const events = [
                { name: 'Mathias Ole Brocks',           type: 'Fødselsdag', birthday: '1983-06-28', image: 'images/Mathias.png' },
                { name: 'Nori Meyer Schmidt Brocks',    type: 'Fødselsdag', birthday: '2018-11-02', image: 'images/Nori.png' },
                { name: 'Lin Maria Meyer Schmidt',      type: 'Fødselsdag', birthday: '1986-08-29', image: 'images/Lin.png' },
                { name: 'Viggo Brocks',                 type: 'Fødselsdag', birthday: '1995-05-25', image: 'images/Viggo.png' },
                { name: 'Kaisa Breer Brocks',           type: 'Fødselsdag', birthday: '2006-01-04', image: 'images/Kaisa.png' },
                { name: 'Aija Breer Brocks',            type: 'Fødselsdag', birthday: '2008-09-29', image: 'images/Aija.png' },
                { name: 'Nina Brocks',                  type: 'Fødselsdag', birthday: '1979-08-02', image: 'images/Nina.png' },
                { name: 'Katrine Brocks',               type: 'Fødselsdag', birthday: '1978-10-15', image: 'images/Katrine.png' },
                { name: 'Ursula',                       type: 'Fødselsdag', birthday: '1988-04-05', image: 'images/Ursula.png' },
                { name: 'Maja Gunilla Meyer Schmidt',   type: 'Fødselsdag', birthday: '1988-03-13', image: 'images/Maja.png' },
                { name: 'Anders Gerning',              type: 'Fødselsdag', birthday: '1988-10-15', image: 'images/Anders.png' },
                { name: 'Birgitte Meyer',               type: 'Fødselsdag', birthday: '1988-06-30', image: 'images/Birgitte.png' },
                { name: 'Henrik Schmidt',               type: 'Fødselsdag', birthday: '1988-12-01', image: 'images/Henrik.png' },
                { name: 'Anne Brocks',                  type: 'Fødselsdag', birthday: '1988-01-21', image: 'images/Anne.png' },
                { name: 'Peter Brocks',                 type: 'Fødselsdag', birthday: '1988-04-13', image: 'images/Peter.png' },
                { name: 'Mike Wittrup',                 type: 'Fødselsdag', birthday: '1988-09-23', image: 'images/Mike.png' },
                { name: 'Sophus Breer',                 type: 'Fødselsdag', birthday: '1976-11-12', image: 'images/Sophus.png' },
            ];

            const scrollContainer = document.getElementById('scroll-container');
            const eventListWrapper = document.getElementById('event-list-wrapper');
            
            function lerp(a, b, amount) {
                return a + amount * (b - a);
            }

            function lerpColor(a, b, amount) {
                const ar = a >> 16, ag = a >> 8 & 0xff, ab = a & 0xff,
                      br = b >> 16, bg = b >> 8 & 0xff, bb = b & 0xff,
                      rr = Math.round(lerp(ar, br, amount)),
                      rg = Math.round(lerp(ag, bg, amount)),
                      rb = Math.round(lerp(ab, bb, amount));
                return `#${(1 << 24 | rr << 16 | rg << 8 | rb).toString(16).slice(1)}`;
            }

            function getDaysUntilNextBirthday(birthday) {
                const today = new Date();
                today.setHours(0, 0, 0, 0); 
                let nextBirthday = new Date(birthday);
                nextBirthday.setFullYear(today.getFullYear());
                if (nextBirthday < today) {
                    nextBirthday.setFullYear(today.getFullYear() + 1);
                }
                const msPerDay = 1000 * 60 * 60 * 24;
                return Math.ceil((nextBirthday - today) / msPerDay);
            }

            function processEvents() {
                events.forEach(event => {
                    const birthdayDate = new Date(event.birthday);
                    event.days = getDaysUntilNextBirthday(birthdayDate);
                });
            }

            function sortEvents() {
                events.sort((a, b) => a.days - b.days);
            }

            function renderEvents() {
                let content = '';
                events.forEach(event => {
                    content += `
                        <div class="event-row">
                            <div class="image-container">
                                <div class="image-placeholder" style="background-image: url('${event.image}')"></div>
                                <div class="image-overlay"></div>
                            </div>
                            <div class="details-section">
                                <div class="name">${event.name}</div>
                                <div class="days-subtitle">${event.days} dage</div>
                            </div>
                        </div>
                    `;
                });
                eventListWrapper.innerHTML = content;
            }

            function updateCardStyles() {
                const viewportCenter = window.innerHeight / 2;
                const elementsToUpdate = document.querySelectorAll('.event-row, .heading-container');
                
                const styles = getComputedStyle(document.documentElement);
                const colorCardDefault = parseInt(styles.getPropertyValue('--color-card-default').trim().substring(1), 16);
                const colorCardCenter = parseInt(styles.getPropertyValue('--color-card-center').trim().substring(1), 16);
                const colorTextDefault = parseInt(styles.getPropertyValue('--color-text-default').trim().substring(1), 16);
                const colorTextSubtitle = parseInt(styles.getPropertyValue('--color-text-subtitle').trim().substring(1), 16);
                const colorTextCenter = parseInt(styles.getPropertyValue('--color-text-center').trim().substring(1), 16);

                elementsToUpdate.forEach(el => {
                    const rowRect = el.getBoundingClientRect();
                    const rowCenter = rowRect.top + rowRect.height / 2;
                    const distance = Math.abs(viewportCenter - rowCenter);
                    
                    const maxColorDistance = viewportCenter * 1.2;
                    const colorEffect = Math.min(distance / maxColorDistance, 1);
                    
                    if (el.classList.contains('event-row')) {
                        el.style.backgroundColor = lerpColor(colorCardCenter, colorCardDefault, colorEffect);
                        const nameEl = el.querySelector('.name');
                        const subtitleEl = el.querySelector('.days-subtitle');
                        if (nameEl) nameEl.style.color = lerpColor(colorTextCenter, colorTextDefault, colorEffect);
                        if (subtitleEl) subtitleEl.style.color = lerpColor(colorTextCenter, colorTextSubtitle, colorEffect);
                        
                        const imageOverlay = el.querySelector('.image-overlay');
                        if (imageOverlay) imageOverlay.style.opacity = colorEffect * 0.85;
                    }

                    const maxEffectDistance = viewportCenter;
                    const effect = Math.min(distance / maxEffectDistance, 1);
                    const scale = 1 - (effect * 0.1);
                    const opacity = 1 - (effect * 0.1);

                    el.style.transform = `scale(${scale})`;
                    el.style.opacity = opacity;

                    if (el.classList.contains('event-row')) {
                        el.style.cursor = (distance < 10) ? 'default' : 'pointer';
                    }
                });
            }
            
            function setupScrollListener() {
                const firstCard = document.querySelector('.event-row');
                if (!firstCard) return;

                const initialScrollTop = firstCard.offsetTop - (scrollContainer.clientHeight / 2) + (firstCard.offsetHeight / 2);
                scrollContainer.scrollTop = initialScrollTop;

                scrollContainer.addEventListener('scroll', updateCardStyles);
            }

            function setupClickListener() {
                eventListWrapper.addEventListener('click', (e) => {
                    const clickedCard = e.target.closest('.event-row');
                    if (!clickedCard) return;
                    
                    const rowRect = clickedCard.getBoundingClientRect();
                    const rowCenter = rowRect.top + rowRect.height / 2;
                    const distance = Math.abs(window.innerHeight / 2 - rowCenter);

                    if (distance > 10) {
                        const targetScrollTop = clickedCard.offsetTop - (scrollContainer.clientHeight / 2) + (clickedCard.offsetHeight / 2);
                        scrollContainer.scrollTo({
                            top: targetScrollTop,
                            behavior: 'smooth'
                        });
                    }
                });
            }

            // --- INITIALIZATION ---
            resizeCanvas();
            createParticles();
            animateParticles();
            window.addEventListener('resize', () => {
                resizeCanvas();
                createParticles();
            });

            processEvents();
            sortEvents();
            renderEvents();
            setupScrollListener();
            setupClickListener(); 
            updateCardStyles(); 

        });
    </script>
</body>
</html>
